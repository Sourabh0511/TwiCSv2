#uncomment till here---> plot starts
from mpl_toolkits import mplot3d
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
from scipy.optimize import curve_fit
from scipy.optimize import leastsq,least_squares


#------------------------------------------with sketching derived from entity and non-entity classes----------------------------------

ranking_effectiveness_single_sketch=[ 1.0, 0.8333333333333334, 0.8571428571428571, 0.76, 0.7586206896551724, 0.7222222222222222, 0.7441860465116279, 0.7169811320754716, 0.6885245901639344, 0.6818181818181818, 0.6619718309859155, 0.64, 0.6363636363636364, 0.6219512195121951, 0.5714285714285714, 0.5670103092783505, 0.5943396226415094, 0.6, 0.5948275862068966]
ranking_effectiveness_multi_sketch_cosine=[ 1.0, 0.8333333333333334, 0.7857142857142857, 0.68, 0.6896551724137931, 0.6111111111111112, 0.627906976744186, 0.5849056603773585, 0.5573770491803278, 0.5151515151515151, 0.5070422535211268, 0.5066666666666667, 0.5064935064935064, 0.4878048780487805, 0.4725274725274725, 0.4742268041237113, 0.5188679245283019, 0.5272727272727272, 0.5258620689655172]
ranking_effectiveness_multi_sketch_euclidean=[ 1.0, 0.8333333333333334, 0.7857142857142857, 0.68, 0.6551724137931034, 0.5555555555555556, 0.5813953488372093, 0.5471698113207547, 0.5245901639344263, 0.48484848484848486, 0.4788732394366197, 0.48, 0.4935064935064935, 0.4878048780487805, 0.4725274725274725, 0.4845360824742268, 0.5283018867924528, 0.5454545454545454, 0.5431034482758621]
combined_ranking_effectiveness=[ 1.0, 0.8333333333333334, 0.8571428571428571, 0.8, 0.8275862068965517, 0.7777777777777778, 0.7906976744186046, 0.7735849056603774, 0.7704918032786885, 0.7575757575757576, 0.7605633802816901, 0.76, 0.7662337662337663, 0.7560975609756098, 0.7252747252747253, 0.7216494845360825, 0.7452830188679245, 0.7545454545454545, 0.75]
batches= range(1,20)

# for i in range(10,30,5):
# 	print(i)

#adding comment for pseudo push


print(len(ranking_effectiveness_single_sketch),len(ranking_effectiveness_multi_sketch_cosine),len(ranking_effectiveness_multi_sketch_euclidean),len(combined_ranking_effectiveness))

fig = plt.figure()

plt.hold(True)
plt.xticks(np.arange(1, 20, 1.0))

plt.scatter(batches,ranking_effectiveness_single_sketch,label='single sketch, cosine distance')
plt.scatter(batches,ranking_effectiveness_multi_sketch_cosine,label='multiple sketches, cosine distance')
plt.scatter(batches,ranking_effectiveness_multi_sketch_euclidean,label='multiple sketches, euclidean distance')
plt.scatter(batches,combined_ranking_effectiveness,label='multiple sketching techniques combined')

plt.title("Ranking Function Effectiveness")
plt.ylabel('ranking fucntion top-15 effectiveness')
plt.xlabel('Current Batch')
lgd=plt.legend(bbox_to_anchor=(1, 1), loc=9, prop={'size': 4}, borderaxespad=0.)

plt.savefig('effectiveness-sketching.png', dpi = 900, bbox_extra_artists=(lgd,), bbox_inches='tight')
plt.show()

#determining optimal top-k in ranking
k_values=[10,15,20,25,30]
ranking_effectiveness_single_sketch=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 0.8571428571428571, 1.0, 1.0], [0.7333333333333333, 0.8666666666666667, 0.9333333333333333, 1.0, 1.0], [0.64, 0.76, 0.8, 0.96, 0.96], [0.6666666666666666, 0.7666666666666667, 0.8, 0.9333333333333333, 0.9333333333333333], [0.6571428571428571, 0.7714285714285715, 0.8285714285714286, 0.9428571428571428, 0.9428571428571428], [0.627906976744186, 0.7441860465116279, 0.7906976744186046, 0.8837209302325582, 0.8837209302325582], [0.6153846153846154, 0.7307692307692307, 0.7884615384615384, 0.8653846153846154, 0.8846153846153846], [0.5573770491803278, 0.6885245901639344, 0.7540983606557377, 0.819672131147541, 0.8360655737704918], [0.5303030303030303, 0.6666666666666666, 0.7272727272727273, 0.803030303030303, 0.8181818181818182], [0.5285714285714286, 0.6571428571428571, 0.7142857142857143, 0.7857142857142857, 0.8142857142857143], [0.5135135135135135, 0.6351351351351351, 0.6891891891891891, 0.7702702702702703, 0.7972972972972973], [0.5194805194805194, 0.6363636363636364, 0.6883116883116883, 0.7662337662337663, 0.8051948051948052], [0.5060240963855421, 0.6144578313253012, 0.6746987951807228, 0.7590361445783133, 0.7951807228915663], [0.4725274725274725, 0.5714285714285714, 0.6373626373626373, 0.7362637362637363, 0.7692307692307693], [0.4742268041237113, 0.5670103092783505, 0.6288659793814433, 0.7319587628865979, 0.7628865979381443], [0.4953271028037383, 0.5981308411214953, 0.6542056074766355, 0.7570093457943925, 0.7850467289719626], [0.48672566371681414, 0.5929203539823009, 0.6548672566371682, 0.7699115044247787, 0.7964601769911505], [0.4956521739130435, 0.6, 0.6608695652173913, 0.7739130434782608, 0.8]]
ranking_effectiveness_multi_sketch_cosine=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 1.0, 1.0, 1.0], [0.6666666666666666, 0.8666666666666667, 0.9333333333333333, 0.9333333333333333, 1.0], [0.52, 0.76, 0.84, 0.84, 0.96], [0.5, 0.7333333333333333, 0.8666666666666667, 0.8666666666666667, 0.9666666666666667], [0.45714285714285713, 0.6857142857142857, 0.8571428571428571, 0.8857142857142857, 0.9714285714285714], [0.4418604651162791, 0.6511627906976745, 0.8372093023255814, 0.8604651162790697, 0.9302325581395349], [0.4423076923076923, 0.6153846153846154, 0.7884615384615384, 0.8461538461538461, 0.9230769230769231], [0.4426229508196721, 0.5901639344262295, 0.7377049180327869, 0.8032786885245902, 0.9016393442622951], [0.4090909090909091, 0.5454545454545454, 0.6818181818181818, 0.7727272727272727, 0.8787878787878788], [0.4142857142857143, 0.5428571428571428, 0.6714285714285714, 0.7714285714285715, 0.8857142857142857], [0.4189189189189189, 0.5405405405405406, 0.6621621621621622, 0.7567567567567568, 0.8783783783783784], [0.4155844155844156, 0.5454545454545454, 0.6623376623376623, 0.7532467532467533, 0.8701298701298701], [0.40963855421686746, 0.5301204819277109, 0.6626506024096386, 0.7469879518072289, 0.8554216867469879], [0.4065934065934066, 0.5164835164835165, 0.6373626373626373, 0.7362637362637363, 0.8351648351648352], [0.3917525773195876, 0.5154639175257731, 0.6391752577319587, 0.7319587628865979, 0.8247422680412371], [0.411214953271028, 0.5607476635514018, 0.6728971962616822, 0.7570093457943925, 0.8411214953271028], [0.415929203539823, 0.5663716814159292, 0.6814159292035398, 0.7699115044247787, 0.8495575221238938], [0.40869565217391307, 0.5652173913043478, 0.6782608695652174, 0.7739130434782608, 0.8521739130434782]]
ranking_effectiveness_multi_sketch_euclidean=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 1.0, 1.0, 1.0], [0.6666666666666666, 0.8, 0.9333333333333333, 0.9333333333333333, 0.9333333333333333], [0.52, 0.72, 0.84, 0.84, 0.92], [0.5, 0.7, 0.8666666666666667, 0.8666666666666667, 0.9333333333333333], [0.45714285714285713, 0.6571428571428571, 0.8571428571428571, 0.8857142857142857, 0.9428571428571428], [0.4418604651162791, 0.627906976744186, 0.8372093023255814, 0.8604651162790697, 0.9069767441860465], [0.4230769230769231, 0.5961538461538461, 0.7884615384615384, 0.8461538461538461, 0.9038461538461539], [0.4262295081967213, 0.5737704918032787, 0.7377049180327869, 0.8032786885245902, 0.8852459016393442], [0.3939393939393939, 0.5303030303030303, 0.6818181818181818, 0.7575757575757576, 0.8636363636363636], [0.4, 0.5285714285714286, 0.6714285714285714, 0.7571428571428571, 0.8714285714285714], [0.40540540540540543, 0.527027027027027, 0.6621621621621622, 0.7432432432432432, 0.8648648648648649], [0.4025974025974026, 0.5324675324675324, 0.6623376623376623, 0.7402597402597403, 0.8571428571428571], [0.39759036144578314, 0.5301204819277109, 0.6626506024096386, 0.7349397590361446, 0.8433734939759037], [0.38461538461538464, 0.5164835164835165, 0.6483516483516484, 0.7142857142857143, 0.8241758241758241], [0.3711340206185567, 0.5257731958762887, 0.6494845360824743, 0.711340206185567, 0.8144329896907216], [0.3925233644859813, 0.5700934579439252, 0.6822429906542056, 0.7383177570093458, 0.8317757009345794], [0.39823008849557523, 0.584070796460177, 0.6902654867256637, 0.7522123893805309, 0.8407079646017699], [0.391304347826087, 0.5826086956521739, 0.6956521739130435, 0.7565217391304347, 0.8434782608695652]]
combined_ranking_effectiveness= [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 1.0, 1.0, 1.0], [0.8, 0.8666666666666667, 1.0, 1.0, 1.0], [0.72, 0.8, 0.88, 0.96, 0.96], [0.7333333333333333, 0.8, 0.9, 0.9666666666666667, 0.9666666666666667], [0.7142857142857143, 0.8, 0.9142857142857143, 0.9714285714285714, 0.9714285714285714], [0.6744186046511628, 0.7674418604651163, 0.8837209302325582, 0.9302325581395349, 0.9302325581395349], [0.6730769230769231, 0.7692307692307693, 0.8846153846153846, 0.9230769230769231, 0.9423076923076923], [0.6557377049180327, 0.7704918032786885, 0.8852459016393442, 0.9180327868852459, 0.9344262295081968], [0.6212121212121212, 0.7424242424242424, 0.8484848484848485, 0.9090909090909091, 0.9242424242424242], [0.6428571428571429, 0.7571428571428571, 0.8571428571428571, 0.9142857142857143, 0.9285714285714286], [0.6486486486486487, 0.7567567567567568, 0.8513513513513513, 0.918918918918919, 0.9324324324324325], [0.6493506493506493, 0.7532467532467533, 0.8441558441558441, 0.9090909090909091, 0.935064935064935], [0.6506024096385542, 0.7469879518072289, 0.8433734939759037, 0.9156626506024096, 0.9397590361445783], [0.6373626373626373, 0.7252747252747253, 0.8351648351648352, 0.9230769230769231, 0.945054945054945], [0.6288659793814433, 0.7216494845360825, 0.8247422680412371, 0.9175257731958762, 0.9381443298969072], [0.6542056074766355, 0.7476635514018691, 0.8411214953271028, 0.9252336448598131, 0.9439252336448598], [0.6548672566371682, 0.7522123893805309, 0.8407079646017699, 0.9292035398230089, 0.9469026548672567], [0.6608695652173913, 0.7565217391304347, 0.8434782608695652, 0.9304347826086956, 0.9478260869565217]]

#plotting single sketch effectiveness values
fig1 = plt.figure()
plt.hold(True)
ranking_effectiveness_single_sketch=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 0.8571428571428571, 1.0, 1.0], [0.7333333333333333, 0.8666666666666667, 0.9333333333333333, 1.0, 1.0], [0.64, 0.76, 0.8, 0.96, 0.96], [0.6666666666666666, 0.7666666666666667, 0.8, 0.9333333333333333, 0.9333333333333333], [0.6571428571428571, 0.7714285714285715, 0.8285714285714286, 0.9428571428571428, 0.9428571428571428], [0.627906976744186, 0.7441860465116279, 0.7906976744186046, 0.8837209302325582, 0.8837209302325582], [0.6153846153846154, 0.7307692307692307, 0.7884615384615384, 0.8653846153846154, 0.8846153846153846], [0.5573770491803278, 0.6885245901639344, 0.7540983606557377, 0.819672131147541, 0.8360655737704918], [0.5303030303030303, 0.6666666666666666, 0.7272727272727273, 0.803030303030303, 0.8181818181818182], [0.5285714285714286, 0.6571428571428571, 0.7142857142857143, 0.7857142857142857, 0.8142857142857143], [0.5135135135135135, 0.6351351351351351, 0.6891891891891891, 0.7702702702702703, 0.7972972972972973], [0.5194805194805194, 0.6363636363636364, 0.6883116883116883, 0.7662337662337663, 0.8051948051948052], [0.5060240963855421, 0.6144578313253012, 0.6746987951807228, 0.7590361445783133, 0.7951807228915663], [0.4725274725274725, 0.5714285714285714, 0.6373626373626373, 0.7362637362637363, 0.7692307692307693], [0.4742268041237113, 0.5670103092783505, 0.6288659793814433, 0.7319587628865979, 0.7628865979381443], [0.4953271028037383, 0.5981308411214953, 0.6542056074766355, 0.7570093457943925, 0.7850467289719626], [0.48672566371681414, 0.5929203539823009, 0.6548672566371682, 0.7699115044247787, 0.7964601769911505], [0.4956521739130435, 0.6, 0.6608695652173913, 0.7739130434782608, 0.8]]
for array_index in range(0,19):
	array_to_plot= ranking_effectiveness_single_sketch[array_index]
	plt.plot(k_values,array_to_plot,label='batch '+str(array_index+1))
plt.ylabel('ranking function top-k effectiveness')
plt.xlabel('k-value')
plt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)

plt.title('Ranking Function top-k effectiveness with single entity/non-entity sketches')
plt.savefig('top-k-with-single-entity-non-entity-sketches.png', dpi = 900)
plt.show()


#plotting multi sketch cosine effectiveness values
fig1 = plt.figure()
plt.hold(True)
ranking_effectiveness_multi_sketch_cosine=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 0.8571428571428571, 1.0, 1.0], [0.7333333333333333, 0.8666666666666667, 0.9333333333333333, 1.0, 1.0], [0.64, 0.76, 0.8, 0.96, 0.96], [0.6666666666666666, 0.7666666666666667, 0.8, 0.9333333333333333, 0.9333333333333333], [0.6571428571428571, 0.7714285714285715, 0.8285714285714286, 0.9428571428571428, 0.9428571428571428], [0.627906976744186, 0.7441860465116279, 0.7906976744186046, 0.8837209302325582, 0.8837209302325582], [0.6153846153846154, 0.7307692307692307, 0.7884615384615384, 0.8653846153846154, 0.8846153846153846], [0.5573770491803278, 0.6885245901639344, 0.7540983606557377, 0.819672131147541, 0.8360655737704918], [0.5303030303030303, 0.6666666666666666, 0.7272727272727273, 0.803030303030303, 0.8181818181818182], [0.5285714285714286, 0.6571428571428571, 0.7142857142857143, 0.7857142857142857, 0.8142857142857143], [0.5135135135135135, 0.6351351351351351, 0.6891891891891891, 0.7702702702702703, 0.7972972972972973], [0.5194805194805194, 0.6363636363636364, 0.6883116883116883, 0.7662337662337663, 0.8051948051948052], [0.5060240963855421, 0.6144578313253012, 0.6746987951807228, 0.7590361445783133, 0.7951807228915663], [0.4725274725274725, 0.5714285714285714, 0.6373626373626373, 0.7362637362637363, 0.7692307692307693], [0.4742268041237113, 0.5670103092783505, 0.6288659793814433, 0.7319587628865979, 0.7628865979381443], [0.4953271028037383, 0.5981308411214953, 0.6542056074766355, 0.7570093457943925, 0.7850467289719626], [0.48672566371681414, 0.5929203539823009, 0.6548672566371682, 0.7699115044247787, 0.7964601769911505], [0.4956521739130435, 0.6, 0.6608695652173913, 0.7739130434782608, 0.8]]
for array_index in range(0,19):
	array_to_plot= ranking_effectiveness_multi_sketch_cosine[array_index]
	plt.plot(k_values,array_to_plot,label='batch '+str(array_index+1))
plt.ylabel('ranking function top-k effectiveness')
plt.xlabel('k-value')
plt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)

plt.title('Ranking Function top-k effectiveness with multiple entity/non-entity sketches (cosine)')
plt.savefig('top-k-multiple-entity-non-entity-sketches-cosine.png', dpi = 900)
plt.show()


#plotting multi sketch euclidean effectiveness values
fig1 = plt.figure()
plt.hold(True)
ranking_effectiveness_multi_sketch_euclidean=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 0.8571428571428571, 1.0, 1.0], [0.7333333333333333, 0.8666666666666667, 0.9333333333333333, 1.0, 1.0], [0.64, 0.76, 0.8, 0.96, 0.96], [0.6666666666666666, 0.7666666666666667, 0.8, 0.9333333333333333, 0.9333333333333333], [0.6571428571428571, 0.7714285714285715, 0.8285714285714286, 0.9428571428571428, 0.9428571428571428], [0.627906976744186, 0.7441860465116279, 0.7906976744186046, 0.8837209302325582, 0.8837209302325582], [0.6153846153846154, 0.7307692307692307, 0.7884615384615384, 0.8653846153846154, 0.8846153846153846], [0.5573770491803278, 0.6885245901639344, 0.7540983606557377, 0.819672131147541, 0.8360655737704918], [0.5303030303030303, 0.6666666666666666, 0.7272727272727273, 0.803030303030303, 0.8181818181818182], [0.5285714285714286, 0.6571428571428571, 0.7142857142857143, 0.7857142857142857, 0.8142857142857143], [0.5135135135135135, 0.6351351351351351, 0.6891891891891891, 0.7702702702702703, 0.7972972972972973], [0.5194805194805194, 0.6363636363636364, 0.6883116883116883, 0.7662337662337663, 0.8051948051948052], [0.5060240963855421, 0.6144578313253012, 0.6746987951807228, 0.7590361445783133, 0.7951807228915663], [0.4725274725274725, 0.5714285714285714, 0.6373626373626373, 0.7362637362637363, 0.7692307692307693], [0.4742268041237113, 0.5670103092783505, 0.6288659793814433, 0.7319587628865979, 0.7628865979381443], [0.4953271028037383, 0.5981308411214953, 0.6542056074766355, 0.7570093457943925, 0.7850467289719626], [0.48672566371681414, 0.5929203539823009, 0.6548672566371682, 0.7699115044247787, 0.7964601769911505], [0.4956521739130435, 0.6, 0.6608695652173913, 0.7739130434782608, 0.8]]
for array_index in range(0,19):
	array_to_plot= ranking_effectiveness_multi_sketch_euclidean[array_index]
	plt.plot(k_values,array_to_plot,label='batch '+str(array_index+1))
plt.ylabel('ranking function top-k effectiveness')
plt.xlabel('k-value')
plt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)

plt.title('Ranking Function top-k effectiveness with multiple entity/non-entity sketches (euclidean)')
plt.savefig('top-k-multiple-entity-non-entity-sketches-euclidean.png', dpi = 900)
plt.show()


#plotting combined sketching effectiveness values
fig1 = plt.figure()
plt.hold(True)
combined_ranking_effectiveness=  [[1.0, 1.0, 1.0, 1.0, 1.0], [0.8571428571428571, 0.8571428571428571, 0.8571428571428571, 1.0, 1.0], [0.7333333333333333, 0.8666666666666667, 0.9333333333333333, 1.0, 1.0], [0.64, 0.76, 0.8, 0.96, 0.96], [0.6666666666666666, 0.7666666666666667, 0.8, 0.9333333333333333, 0.9333333333333333], [0.6571428571428571, 0.7714285714285715, 0.8285714285714286, 0.9428571428571428, 0.9428571428571428], [0.627906976744186, 0.7441860465116279, 0.7906976744186046, 0.8837209302325582, 0.8837209302325582], [0.6153846153846154, 0.7307692307692307, 0.7884615384615384, 0.8653846153846154, 0.8846153846153846], [0.5573770491803278, 0.6885245901639344, 0.7540983606557377, 0.819672131147541, 0.8360655737704918], [0.5303030303030303, 0.6666666666666666, 0.7272727272727273, 0.803030303030303, 0.8181818181818182], [0.5285714285714286, 0.6571428571428571, 0.7142857142857143, 0.7857142857142857, 0.8142857142857143], [0.5135135135135135, 0.6351351351351351, 0.6891891891891891, 0.7702702702702703, 0.7972972972972973], [0.5194805194805194, 0.6363636363636364, 0.6883116883116883, 0.7662337662337663, 0.8051948051948052], [0.5060240963855421, 0.6144578313253012, 0.6746987951807228, 0.7590361445783133, 0.7951807228915663], [0.4725274725274725, 0.5714285714285714, 0.6373626373626373, 0.7362637362637363, 0.7692307692307693], [0.4742268041237113, 0.5670103092783505, 0.6288659793814433, 0.7319587628865979, 0.7628865979381443], [0.4953271028037383, 0.5981308411214953, 0.6542056074766355, 0.7570093457943925, 0.7850467289719626], [0.48672566371681414, 0.5929203539823009, 0.6548672566371682, 0.7699115044247787, 0.7964601769911505], [0.4956521739130435, 0.6, 0.6608695652173913, 0.7739130434782608, 0.8]]
for array_index in range(0,19):
	array_to_plot= combined_ranking_effectiveness[array_index]
	plt.plot(k_values,array_to_plot,label='batch '+str(array_index+1))
plt.ylabel('ranking function top-k effectiveness')
plt.xlabel('k-value')
plt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)

plt.title('Ranking Function top-k effectiveness with a combination of sketches')
plt.savefig('top-k-combined-sketching.png', dpi = 900)
plt.show()




#------------------------------------------with sketching derived from entity and non-entity classes----------------------------------













# def func(x,a,b1,b2):
# 	x1,x2=x
# 	return (a*np.exp(b1*x1+b2*x2))





#model function

# def func(x,a,b):
	
# 	return (a*np.exp(b*x))

# def func(x, a, b, c):
# 	# return a*np.exp(-b*x)+c
# 	return a*x**2 + b*x + c

# def residuals(coeffs,y,x):
# 	return y-func(x,coeffs[0],coeffs[1],coeffs[2])

# filename='entity-level-estimates-average.csv'
# data=pd.read_csv(filename,sep =',', index_col=False)
# fig, axes = plt.subplots(nrows=3, ncols=3, sharex=True, sharey=True, figsize=(20,20) )
# fig = plt.figure()
# ax = fig.gca(projection='3d')

# ax.set_xticks([0, 20, 1.0])
# ax.set_yticks([0, 20, 1.0])


# x_data=[]
# x0=[]
# x1=[]
# y_data=[]

# # for i, ax in enumerate(axes.flat, start=0):
# # 	print(i)
# for i in range(11):
# 	fig, ax = plt.subplots(nrows=1, ncols=1)
# 	ax.set_xticks(np.arange(0, 20, 1.0))
# 	x_val=list(range(i,20))
# 	#x_val_transformed=[j-i for j in x_val]
# 	x0_arr=[j-i for j in x_val]
# 	y_val=data[str(i)].tolist()[i:]
# 	# y_data.extend(y_val)
# 	#print(len(x_val),len(y_val[i:]))
# 	#y_val_norm=[(y_val[0]-i)/y_val[0] for i in y_val]
# 	#plt.plot(x_val,y_val_norm,label=str(i))
# 	x0_arr_truncated=x0_arr[:16]
# 	y_val_truncated=y_val[:16]
# 	# print(x0_arr,y_val)
# 	# print(len(x0_arr_truncated),len(y_val_truncated))
# 	# ax.scatter(x0_arr,y_val)
	
# 	# np_poly=np.polyfit(np.array(x0_arr), np.array(y_val), 3)
# 	# estimated_y = np.polyval(np_poly,np.array(x0_arr))
# 	np_poly=np.polyfit(np.array(x0_arr_truncated), np.array(y_val_truncated), 3)
# 	estimated_y = np.polyval(np_poly,np.array(x0_arr))
# 	print('predictions for batch '+str(i)+':')
# 	print(y_val)
# 	print(estimated_y)
	
	# p0=np.array([y_val[0],1e-4,1], dtype=float)
	# curve_fit_coeff,cov = curve_fit(func, np.array(x0_arr), np.array(y_val))
	# estimated_y=func(np.array(x0_arr),curve_fit_coeff[0],curve_fit_coeff[1],curve_fit_coeff[2])
	# print(cov)

	# res_lsq = least_squares(residuals, p0, args=(np.array(x0_arr), np.array(y_val)))
	# # print(res_lsq)
	# estimated_y=func(np.array(x0_arr),res_lsq.x[0],res_lsq.x[1],res_lsq.x[2])

	# res_robust = least_squares(residuals, p0, loss='soft_l1', f_scale=0.1, args=(np.array(x0_arr), np.array(y_val)))
	# # print(res_lsq)
	# estimated_y=func(np.array(x0_arr),res_robust.x[0],res_robust.x[1],res_robust.x[2])
	
	
	# print(estimated_y)
	# ax.plot(x0_arr,estimated_y)

	# ax.set_title("Propagation of Ambiguous Candidates from batch "+str(i))
	# ax.set_ylabel('# of ambiguous candidates remaining')
	# ax.set_xlabel('Current Batch')

	# plt.show()


# fig.tight_layout()

# plt.show()
	

	# plt.plot(x_val_transformed,y_val_norm,label=str(i))
# 	x0.extend(x0_arr)
# 	x1.extend(x_val)
# x_data=[x0,x1]
# x_data=np.array(x_data)

# coeff, cov=curve_fit(func, x_data,y_data)
# print(coeff)
# estimated_y=func(x_data,coeff[0],coeff[1],coeff[2])
# print(len(x_data[0]),len(x_data[1]),len(estimated_y))
# ax.scatter(x_data[0], x_data[1],estimated_y, alpha=0.2)


# ax.set_xlabel('Entry Batch')

# plt.title("Propagation of Ambiguous Candidates labeling through batches")
# plt.ylabel('# of ambiguous candidates labelled')
# plt.xlabel('Batches since entry')

# plt.legend()
# plt.show()
#----------------------------------plot code ends---------------------------------------------
# extenstion='.csv'
# sentence='sentence-level-estimates-'
# mention='mention-level-estimates-'
# entity='entity-level-estimates-'
# column_headers=['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19']
# # name=entity+str(0)+extenstion  # for entities
# name=mention+str(0)+extenstion # for mentions
# # name=sentence+str(0)+extenstion  # for sentences
# df_original=pd.read_csv(name,sep =',', index_col=False)
# averaged_data=pd.DataFrame(index=df_original.index,columns=df_original.columns)
# averaged_data = averaged_data.fillna(0)

# for iter in range(10):
# 	# name=entity+str(iter)+extenstion # for entities
# 	name=mention+str(iter)+extenstion # for mentions
# 	# name=sentence+str(iter)+extenstion # for sentences
# 	print(name)
# 	data=pd.read_csv(name,sep =',', index_col=False)
# 	averaged_data=averaged_data.add(data)
# averaged_data= averaged_data/10
# # averaged_data.to_csv(entity+'average'+extenstion) # for entities
# averaged_data.to_csv(mention+'average'+extenstion) # for mentions
# # averaged_data.to_csv(sentence+'average'+extenstion) # for sentences
#----------------------------------averaging code ends---------------------------------------------


# good= [275498,
# 270537,
# 270038,
# 270372,
# 269851,
# 270641,
# 269851,
# 270078,
# 270038,
# 270372]

# bad= [ 708783,
# 720784,
# 723066,
# 718229,
# 719500,
# 718229,
# 722636,
# 722836,
# 722836,
# 721364]

# ambiguous= [ 42873,
# 35833,
# 34050,
# 38553,
# 37803,
# 38284,
# 34667,
# 34240,
# 34280,
# 35418]

# incomplete=[34788,
# 35670,
# 34030,
# 38261,
# 37529,
# 38017,
# 34549,
# 34191,
# 34191,
# 35253]

# print('good: ',str(sum(good)/len(good)))
# print('bad: ',str(sum(bad)/len(bad)))
# print('ambiguous: ',str(sum(ambiguous)/len(ambiguous)))
# print('incomplete: ',str(sum(incomplete)/len(incomplete)))
